---
title: "Virtual Mutation Data Analysis for the AST 2016 Paper"
output:
  pdf_document:
    keep_tex: true
    highlight: pygments
---

# Installing the Virtual Mutation Package

This code will load in the virtual mutation package from a local directory. I was not able to get it to work with an
installation from Bitbucket because of permission errors. You will need to change the path so that it is correct for
your file system.

```{r, echo=TRUE}
options(scipen=10, width=200)
mypath = "/home/gkapfham/working/research/source/analysis/databases/"
devtools::install_local(paste(mypath, "virtualmutationanalysis", sep=""))
```

# Comparing "Time-Constrained" Original Mutation and Virtual Mutation

First, load in the libraries that are used along with the virtualmutationanalysis package.

```{r, echo=TRUE}
library(virtualmutationanalysis)
suppressPackageStartupMessages(library(plyr))
suppressPackageStartupMessages(library(dplyr))
suppressPackageStartupMessages(library(ggplot2))
suppressPackageStartupMessages(library(grid))
suppressPackageStartupMessages(library(scales))
```

Now, plot the graph that shows the mutation scores for the virtual mutation technique and the original mutation method
that can run for the same amount of time as the virtual one.

```{r, echo=TRUE}
time_constrained_data = read_time_constrained_mutation_data()
time_constrained_data_tidy = time_constrained_data %>% transform_time_constrained_data_for_scores()
visualise_mutation_score_time_constrained(time_constrained_data_tidy)
```

Analysis of the results in this graph:

- Much more variability for the time-constrained method than the virtual one
- Greater variability in the Person schema is due to the fact that sometimes the score is zero, other times it is one
- Also, the BankAccount schema sees a lot of variability, with very different high and low values

Additional data points to support this analysis

```{r, echo=TRUE, tidy=FALSE}
time_constrained_data_tidy %>%
  filter(schema %in% c("Person")) %>%
  filter(dbms %in% c("Postgres")) %>%
  filter(score_type %in% c("Time-Constrained")) %>%
  print(n=100)
time_constrained_data_tidy %>%
  filter(schema %in% c("BankAccount")) %>%
  filter(dbms %in% c("HyperSQL")) %>%
  filter(score_type %in% c("Time-Constrained")) %>%
  print(n=100)
```


